<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <script>
        function Dog (name, breed, weight) {
            this.name = name;
            this.breed = breed;
            this.weight = weight;
        }

        Dog.prototype.species = "Canine";

        Dog.prototype.bark = function() {
            if (this.weight > 25) {
                console.log(this.name + " says Woof!");
            } else {
                console.log(this.name + " says Yip!");
            }
        };

        Dog.prototype.run = function(){
            console.log("Run!");
        }

        Dog.prototype.wag = function() {
            console.log("Wag!");
        }

        Dog.prototype.sitting = false;

        Dog.prototype.sit = function() {
            if (this.sitting) {
                console.log(this.name + " is already sitting");
            } else {
                this.sitting = true;
                console.log(this.name + " is sitting now");
            }
        }

        // const fido = new Dog("Fido", "Mixed", 38);
        // const fluffy = new Dog("Fluffy", "Poodle", 30);
        // const spot = new Dog("Spot", "Chihuaha", 10);

        // spot.bark = function() {
        //     console.log(this.name + " says WOOF!");
        // }

        // spot.sit();
        // spot.sit();

        function ShowDog(name, breed, weight, handler) {
            // this.name = name;
            // this.breed = breed;
            // this.weight = weight;
            Dog.call(this, name, breed, weight);
            this.handler = handler; // handler is a new property only for ShowDog
        }

        ShowDog.prototype = new Dog();
        ShowDog.prototype.constructor = ShowDog;
        ShowDog.prototype.league = "Wrbville";
        ShowDog.prototype.stack = function(){
            console.log("Stack");
        };

        ShowDog.prototype.bait = function() {
            console.log("Baii");
        };

        ShowDog.prototype.gait = function(kind){
            console.log(kind+ "ing");
        }

        ShowDog.prototype.groom = function(){
            console.log("Groom");
        }

        const fido = new Dog("Fido", "Mixed", 38);
        const fluffy = new Dog("Fluffy", "Poodle", 30);
        const spot = new Dog("Spot", "Chihuaha", 10);
        const scotty = new ShowDog("Scotty", "Scottish", 15, "Cookie");
        const beatrice = new ShowDog("Beatrice", "Pomeranian", 5, "Hamilton");

        // fido.bark();
        // fluffy.bark();
        // spot.bark();
        // scotty.bark();
        // beatrice.bark();
        // scotty.gait("Walk");
        // beatrice.groom();

        // fido.bark();
        // fido.run();
        // fido.wag();

        // fluffy.bark();
        // fluffy.run();
        // fluffy.wag();

        // spot.bark();
        // spot.run();
        // spot.wag();

        function Robot(name, year, owner) {
            this.name = name;
            this.year = year;
            this.owner = owner;
        }

        // overwriting toString- Page 608
        Robot.prototype.toString = function() {
            return this.name + "Robot belonging to " + this.owner;
        }

        const toy = new Robot("Toy", 2013, "Avary");        
        // console.log(toy.toString());
        // console.log("Robot is "+ toy); // Any string concatenation will automatically invoke toString function, here we have overwritten to string and that function is getting called
        // DO not overwrite- constructor, hasOwnProperty, isPrototypeOf, propertyIsEnumerable
        // overwriting toString- Page 608-End

        Robot.prototype.maker = "ObjectsRUs";

        Robot.prototype.speak = function (){
            console.log(this.name + " says Hello");
        }

        Robot.prototype.makeCoffee = function() {
            console.log(this.name + " making coffee");
        }

        Robot.prototype.blinkLights = function() {
            console.log(this.name + " blinking lights");
        }

        const robby = new Robot ("robby", 1975, "robby's owner");
        const rosie = new Robot ("rosie", 1989, "rosie's owner");

        robby.onOffSwitch = true;
        robby.makeCoffee = function() {
            console.log("Robby can make coffee his own");
        };

        rosie.cleanHouse = function() {
            console.log("Rossie can clean house");
        };

        
        function SpaceRobot(name, year, owner, homePlanet){
            this.name = name;
            this.year = year;
            this.owner = owner;
            this.homePlanet = homePlanet;
        }

        SpaceRobot.prototype = new Robot();
        
        SpaceRobot.prototype.speak = function() {
            // alert(this.name + " says Sir, If I may venture an opinion..");
        };

        SpaceRobot.prototype.pilot = function() {
            // alert(this.name + " says Thrusters? Are they important");
        }

        const cp30 = new SpaceRobot("CP30", 1977, "Luke Skywalker", "Tatooine");
        cp30.speak();
        cp30.pilot();
        // console.log(cp30 + " was made by "+ cp30.maker);

        // console.log(robby.name + " was invented by "+ robby.owner + " in "+
        // robby.year);
        // robby.blinkLights();

        // rosie.cleanHouse();

        function Game() {
            this.level = 0;
        }

        Game.prototype.play = function() {
            // player plays the game here
            this.level++;
            console.log("Welcome to level "+ this.level);
            this.unlock();
        }

        Game.prototype.unlock = function() {
            if (this.level === 42) {
                Robot.prototype.deployLaser = function() {
                    console.log(this.name + " is blasting you with laser");
                }
            }
        }

        const game = new Game();

        // while (game.level<42){
        //     game.play();
        // }

        // robby.deployLaser();
        // rosie.deployLaser();

        // if we dont explicitly set the constructor for a derived class it will inherit it and it will lead to confusion. To avoid this,
        // showDog.prototype.constructor = showDog 
        // Now scotty.constructor will output showDog. Page No: 601 HFJS

        // Extending builtin functions
        String.prototype.cliche = function() {
            const cliche = ["lock and load", "touch base", "open the kimono"];

            for (let i=0; i<cliche.length; i++){
                let index = this.indexOf(cliche[i]);
                if (index >= 0) {
                    return true;
                }
            }
            return false;
        }

        const words = ["I'll send my car around to pick you up.", 
                "Let's touch base in the morning and see where we are", 
                "We dont want to open the kimono, we just want to inform them"];
        // for(let i=0; i<words.length; i++) {
        //     if (words[i].cliche()) {          //Here we are calling a function on string which will automatically invoke the prototype fucntion we just wrote
        //         console.log("CLICHE FOUND "+ words[i]);
        //     }
        // }

        String.prototype.palindrome = function() {
            console.log(this.valueOf());
            let splitWord = this.split("");
            console.log(splitWord);
            let reverseArr = splitWord.reverse();
            console.log(reverseArr);
            let reverseWord = reverseArr.join("");
            if (reverseWord === this.valueOf()) {
                return true;
            } else {
                return false;
            }
        }

        const wd = "ABCDA";
        // if (wd.palindrome()) {
        //     console.log(wd + " is a palindrome");
        // }

        // console.log(wd.palindrome());


    </script>
</body>
</html>